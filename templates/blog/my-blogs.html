{% extends '../partials/base.html' %}
{% load static %}
{% load custom_filter %}
{% block content %}
        <!-- Main Contents -->
        <script src="https://cdn.jsdelivr.net/npm/flowbite@1.4.1/dist/flowbite.min.js"></script>
        <div class="main_content">
            <div class="mcontainer">

                <div class="profile is_group">

                    <div class="profile user-profile">

                        <div class="profiles_banner">
                            <img src="{{request.user.profile.cover_image.url}}" alt="">
                            <div class="profile_action absolute bottom-0 right-0 space-x-1.5 p-3 text-sm z-50 hidden lg:flex">
                                <a href="#" class="flex items-center justify-center h-8 px-3 rounded-md bg-gray-700 bg-opacity-70 text-white space-x-1.5">
                                    <ion-icon name="crop-outline" class="text-xl"></ion-icon>
                                    <span> Crop  </span>
                                </a>
                                <a href="#" class="flex items-center justify-center h-8 px-3 rounded-md bg-gray-700 bg-opacity-70 text-white space-x-1.5">
                                    <ion-icon name="create-outline" class="text-xl"></ion-icon>
                                    <span> Edit </span>
                                </a>
                            </div>
                        </div>
                        <div class="profiles_content">
    
                            <div class="profile_avatar">
                                <div class="profile_avatar_holder">
                                    <img src="{{request.user.profile.image.url}}" alt="">
                                </div>
                                <div class="user_status status_online"></div>
                                <div class="icon_change_photo" hidden>
                                    <ion-icon name="camera" class="text-xl"></ion-icon>
                                </div>
                            </div>
    
                            <div class="profile_info">
                                <h1> {{request.user.profile.full_name}} </h1>
                            
                            </div>
    
                        </div>
                        
                        
                        
                    </div>
                    <div id="alert-border-1" class="flex items-center p-4 mb-4 text-blue-800 border-t-4 border-blue-300 bg-blue-50 dark:text-blue-400 dark:bg-gray-800 dark:border-blue-800" role="alert">
                        <svg class="shrink-0 w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                          <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
                        </svg>
                        <div class="ms-3 text-sm font-medium">
                            Thank you for using our platform! Please note that some features are still under development, and you may encounter occasional issues. We appreciate your understanding as we continue to improve and enhance the system. Your feedback is invaluable to us!
                        </div>
                        <button type="button" class="ms-auto -mx-1.5 -my-1.5 bg-blue-50 text-blue-500 rounded-lg focus:ring-2 focus:ring-blue-400 p-1.5 hover:bg-blue-200 inline-flex items-center justify-center h-8 w-8 dark:bg-gray-800 dark:text-blue-400 dark:hover:bg-gray-700" data-dismiss-target="#alert-border-1" aria-label="Close">
                          <span class="sr-only">Dismiss</span>
                          <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                          </svg>
                        </button>
                    </div>
                    <!-- <div class="profiles_content">
                        <div class="flex items-center space-x-4">
                            <div class="flex items-center -space-x-4">
                                <img src="{% static 'assets/images/avatars/avatar-1.jpg' %}" alt="" class="w-10 h-10 rounded-full border-2 border-white">
                                <img src="{% static 'assets/images/avatars/avatar-2.jpg' %}" alt="" class="w-10 h-10 rounded-full border-2 border-white">
                                <img src="{% static 'assets/images/avatars/avatar-3.jpg' %}" alt="" class="w-10 h-10 rounded-full border-2 border-white">
                                <img src="{% static 'assets/images/avatars/avatar-4.jpg' %}" alt="" class="w-10 h-10 rounded-full border-2 border-white">
                                <img src="{% static 'assets/images/avatars/avatar-5.jpg' %}" alt="" class="w-10 h-10 rounded-full border-2 border-white">
                                <img src="{% static 'assets/images/avatars/avatar-6.jpg' %}" alt="" class="w-10 h-10 rounded-full border-2 border-white">
                                <div class="w-10 h-10 rounded-full flex justify-center items-center bg-red-100 text-red-500 font-semibold"> 12+
                                </div>
                            </div>
                        
                            <a href="#" class="flex items-center justify-center h-9 px-5 rounded-md bg-blue-600 text-white  space-x-1.5">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5">
                                    <path fill-rule="evenodd"
                                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"
                                        clip-rule="evenodd"></path>
                                </svg>
                                <span> Follow </span>
                            </a>
                        </div>
                    </div> -->

                    <nav class="responsive-nav border-t -mb-0.5 lg:pl-3.5">
                        <ul  uk-switcher="connect: #timeline-tab; animation: uk-animation-fade" >
                            <li class="active"><a href="#"> Blog <span>{{request.user.profile.blogs.all.count}}</span></a></li>
                            <li><a href="#">Photos <span></span></a></li>
                            <li><a href="#">Videos</a></li>
                            <li><a href="#">Discussion</a></li>
                            <li><a href="#">Videos</a></li>
                            
                            <li><a href="#">About</a></li>
                        </ul>
                    </nav>

                    <!-- search icon -->
                    <a href="#" class="flex items-center justify-center h-10 w-10 rounded-md bg-gray-100 z-10 absolute bottom-2 right-3" uk-toggle="target: #profile-search;animation: uk-animation-slide-top-small"> 
                        <ion-icon name="search" class="text-xl"></ion-icon>
                    </a>
                    <div class="absolute bg-white border bottom-2 right-3 rounded-md z-20" id="profile-search" hidden>
                        <input type="text" placeholder="Search.." class="max-h-11">
                        <ion-icon name="close-outline" class="text-2xl hover:bg-gray-100 p-1 rounded-full cursor-pointer absolute right-2 bottom-1.5" uk-toggle="target: #profile-search;animation: uk-animation-slide-top-small"></ion-icon>
                    </div>

                </div>
                <div class="uk-switcher lg:mt-8 mt-4" id="timeline-tab">
                    
                    <div class="md:flex md:space-x-6 lg:mx-16">
                        <div class="space-y-5 flex-shrink-0 md:w-7/12">

                            <!-- create post  -->
                            <div class="card lg:mx-0 p-4" uk-toggle="target: #create-blog-modal">
                                <div class="flex space-x-3">
                                    <img src="{{request.user.profile.image.url}}" class="w-10 h-10 rounded-full">
                                    <input placeholder="Whatâ€™s inspiring you today? {{request.user.username}}!" class="bg-gray-100 hover:bg-gray-200 flex-1 h-10 px-6 rounded-full">
                                </div>
                                <div class="grid grid-flow-col pt-3 -mx-1 -mb-1 font-semibold text-sm">
                                    <!-- Photo/Video -->
                                    <div class="hover:bg-gray-100 flex items-center p-1.5 rounded-md cursor-pointer">
                                        <svg class="bg-blue-100 h-9 mr-2 p-1.5 rounded-full text-blue-600 w-9 -my-0.5 hidden lg:block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                        </svg>
                                        Photo/Video
                                    </div>
                                    <!-- Motivational Blog -->
                                    <div class="hover:bg-gray-100 flex items-center p-1.5 rounded-md cursor-pointer">
                                        <svg class="bg-yellow-100 h-9 mr-2 p-1.5 rounded-full text-yellow-600 w-9 -my-0.5 hidden lg:block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                        </svg>
                                        Motivational Blog
                                    </div>
                                    <!-- Blogging to Earn -->
                                    <div class="hover:bg-gray-100 flex items-center p-1.5 rounded-md cursor-pointer">
                                        <svg class="bg-green-100 h-9 mr-2 p-1.5 rounded-full text-green-600 w-9 -my-0.5 hidden lg:block" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">  
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h11M9 21V3m0 18a3 3 0 003 3m-6 0a3 3 0 003-3"></path>
                                        </svg>
                                        Blogging to Earn
                                    </div>
                                </div>
                            </div>
                    
                            <div class="blog-div">
                                {% for b in blogs reversed %}
                                    <div class="card lg:mx-0 uk-animation-slide-bottom-small">

                                        <!-- post header-->
                                        <div class="flex justify-between items-center lg:p-4 p-2.5">
                                            <div class="flex flex-1 items-center space-x-4">
                                                <a href="{% url 'userauths:my-profile' %}">
                                                    <img src="{{b.user.profile.image.url}}" class="bg-gray-200 border border-white rounded-full w-10 h-10">
                                                </a>
                                                <div class="flex-1 font-semibold capitalize">
                                                    <a href="{% url 'userauths:my-profile' %}" class="text-black dark:text-gray-100">{% if b.user.profile.full_name %} {{b.user.profile.full_name}} {% else %} {{b.user.username}} {% endif %}</a>
                                                    <div class="text-gray-700 flex items-center space-x-2">  <span> {{b.date|time_ago}} </span>
                                                        <ion-icon name="people"></ion-icon>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <a href="#"> <i class="icon-feather-more-horizontal text-2xl hover:bg-gray-200 rounded-full p-2 transition -mr-1 dark:hover:bg-gray-700"></i> </a>
                                                <div class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden text-base border border-gray-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700" uk-drop="mode: click;pos: bottom-right;animation: uk-animation-slide-bottom-small">

                                                    <ul class="space-y-1">
                                                        <li>
                                                            <a href="#share" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800" uk-toggle>
                                                        <i class="uil-share-alt mr-1"></i> Share
                                                        </a>
                                                        <div id="share" uk-modal>
                                                            <div class="uk-modal-dialog uk-modal-body rounded-xl shadow-2xl p-0 lg:w-5/12">
                                                                <button class="uk-modal-close-default p-3 bg-gray-100 rounded-full m-3" type="button" uk-close></button>
                                                                <div class="border-b px-7 py-5">
                                                                    <div class="lg:text-2xl text-xl font-semibold mb-1">Share a post</div>
                                                                    <div class="text-base text-gray-600">Share using:</div>
                                                                </div>
                                                                <div class="flex justify-center space-x-4 py-6">
                                                                    <!-- Facebook Share Button -->
                                                                    <a href="https://www.facebook.com/sharer/sharer.php?u={{ b.get_absolute_url }}" style="width: 70%; height: 70%; max-width: 100px; max-height: 100px; font-size: 35px;" target="_blank" class="social-share-btn facebook">
                                                                        <i class="fab fa-facebook-f"></i>
                                                                    </a>
                                                        
                                                                    <!-- WhatsApp Share Button -->
                                                                    <a href="https://wa.me/?text={{ b.get_absolute_url }}" style="width: 70%; height: 70%; max-width: 100px; max-height: 100px; font-size: 35px;" target="_blank" class="social-share-btn whatsapp">
                                                                        <i class="fab fa-whatsapp"></i>
                                                                    </a>
                                                        
                                                                    <!-- Twitter Share Button -->
                                                                    <a href="https://twitter.com/intent/tweet?url={{ b.get_absolute_url }}&text=Check%20this%20out!" style="width: 70%; height: 70%; max-width: 100px; max-height: 100px; font-size: 35px;" target="_blank" class="social-share-btn twitter">
                                                                        <i class="fab fa-twitter"></i>
                                                                    </a>
                                                        
                                                                    <!-- LinkedIn Share Button -->
                                                                    <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ b.get_absolute_url }}" style="width: 70%; height: 70%; max-width: 100px; max-height: 100px; font-size: 35px;" target="_blank" class="social-share-btn linkedin">
                                                                        <i class="fab fa-linkedin-in"></i>
                                                                    </a>
                                                                    
                                                                </div>
                                                            </div>
                                                        </div>
                                                        
                                                        
                                                        </li>
                                                        <li>
                                                            <a style="cursor: pointer;" id="edit-the-post" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800 " uk-toggle>
                                                        <i class="uil-edit-alt mr-1"></i>  Edit Post 
                                                        </a>
                                                        <script>

                                                        </script>

                                                        </li>
                                                        {% if request.user == p.user %}
                                                        
                                                            <li>
                                                                <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">
                                                            <i class="uil-comment-slash mr-1"></i>   Disable comments
                                                            </a>
                                                            </li>
                                                            <!-- <li>
                                                            <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">
                                                            <i class="uil-favorite mr-1"></i>  Add favorites 
                                                            </a>  
                                                            </li> -->
                                                            <li>
                                                                <hr class="-mx-2 my-2 dark:border-gray-800">
                                                            </li>
                                                        
                                                            <li>
                                                                <a  id="delete-post{{p.id}}" class="flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md dark:hover:bg-red-600  delete-post={{p.id}}" data-delete-post="{{p.id}}">
                                                            <i class="uil-trash-alt mr-1"></i>  Delete
                                                            </a>
                                                            </li>
                                                        {% endif %}
                                                    </ul>

                                                </div>
                                            </div>
                                        </div>
                                        

                                        <div uk-lightbox>
                                            {% if b.title %}
                                                <div class="p-5 pt-0 border-b dark:border-gray-700 pb-3">
                                                    {{ b.title|truncatechars:130 }}
                                                    {% if b.title|length > 130 %}
                                                        <a href="{% url 'blog:blog-detail' b.slug %}" id="view-more-comments{{b.id}}" class="text-blue-500">Continue Reading</a>
                                                    {% endif %}
                                                </div>
                                            {% endif %}
                                            <style>
                                                .media {
                                                    width: 100%;  /* Ensures full width of the container */
                                                    max-width: 800px; /* Set a max-width to prevent overflow */
                                                    height:300px auto; /* Maintain aspect ratio */
                                                }

                                            </style>
                                            <div class="grid grid-cols-2 gap-2 px-5">
                                                {% if b.file.url|is_image %}
                                                <a href="{{ b.file.url }}" class="col-span-2">  
                                                    <img src="{{ b.file.url }}" alt="" class="media rounded-md w-full lg:h-76 object-cover">
                                                </a>
                                                {% elif b.file.url|is_video %}
                                                <a href="{{ b.file.url }}" class="col-span-2">
                                                    <video controls class="media rounded-md w-full lg:h-76 object-cover">
                                                        <source src="{{ b.file.url }}" type="video/mp4">
                                                        Your browser does not support the video tag.
                                                    </video>
                                                </a>
                                                {% else %}
                                                {% endif %}

                                                

                                            </div>
                                        </div>

                                        <div class="p-4 space-y-3">

                                            <div class="flex space-x-4 lg:font-bold">
                                                <a  class="flex items-center space-x-2 text-blue-500" style="cursor: pointer;">
                                                    <div class="p-2  blog-like-btn{{b.id}} rounded-full {% if request.user in b.likes.all %} text-blue-500 {% else %} text-black {% endif %} lg:bg-gray-100 dark:bg-gray-600" id="blog-like-btn" data-blog-like-btn="{{b.id}}">
                                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="22" height="22" class="dark:text-gray-100">
                                                            <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />
                                                        </svg>
                                                    </div>
                                                    <div><span id="blog-like-count{{b.id}}">{{b.like_count|count_filter}}</span> </div>
                                                </a>
                                                <a href="#" class="flex items-center space-x-2">
                                                    <div class="p-2 rounded-full  text-black lg:bg-gray-100 dark:bg-gray-600">
                                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="22" height="22" class="dark:text-gray-100">
                                                            <path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />
                                                        </svg>
                                                    </div>
                                                    <div><span id="blog-comment-count{{b.id}}">{{b.blog_comment_count|count_filter}}</span> </div>
                                                </a>
                                                
                                                    
                                                    <button onclick="copyToClipboard('{{ b.get_absolute_url }}', this)" class="flex items-center space-x-2 flex-1 justify-end social-share-btn copy">
                                                        <i class="fas fa-copy"></i>
                                                    </button>

                                                    <script>
                                                        function copyToClipboard(text, button) {
                                                            navigator.clipboard.writeText(text).then(function() {
                                                                const originalText = button.innerHTML;
                                                                button.innerHTML = 'Done!';
                                                                setTimeout(function() {
                                                                    button.innerHTML = originalText;
                                                                }, 3000);
                                                            });
                                                        }
                                                    </script>
                                                
                                            </div>
                                            {% comment %}
                                            <div class="flex items-center space-x-3 pt-2">
                                                {% if b.likes.all.count > 0 %}
                                                {% for i in b.like.all|slice:':10' %}
                                                <div class="flex items-center">
                                                    {% if forloop.first %}
                                                    <img src="{{ i.user.profile.image.url}}" alt="" class="w-6 h-6 rounded-full border-2 border-white dark:border-gray-900">
                                                    {% else %}
                                                    <img src="{{i.user.profile.image.url}}" alt="" class="w-6 h-6 rounded-full border-2 border-white dark:border-gray-900 -ml-2">
                                                    {% endif %}
                                                </div>
                                                {% endfor %}
                                                {% endif %}
                                                <div class="dark:text-gray-100">
                                                    Liked <strong> Johnson</strong> and <strong > <span id="blog-like-count" ></span> Others </strong>
                                                </div>
                                            </div>
                                            {% endcomment %}
                                            <div class="border-t py-4 space-y-4 dark:border-gray-600" id="blog-comment-div{{b.id}}">

                                                {% for c in b.blog_comment|slice:":2" %}

                                                {% if c.comment %}
                                                <div class="flex" id="blog-comment-div{{c.id}}">
                                                    <div class="w-10 h-10 rounded-full relative flex-shrink-0">
                                                        <img src="{{c.user.profile.image.url}}" alt="" class="absolute h-full rounded-full w-full">
                                                    </div>
                                                    <div>
                                                        <div class="flex text-gray-700 py-2 px-3 rounded-md bg-gray-100 relative lg:ml-5 ml-2 lg:mr-12 dark:bg-gray-800 dark:text-gray-100">
                                                            <p class="leading-6 flex-grow">{{c.comment}}</p>

                                                            {% if c.user == request.user %}
                                                            <button class="ml-auto text-xs">
                                                                <i class="fas fa-trash text-red-500" id="delete-blog-comment" data-delete-blog-comment="{{c.id}}"></i>
                                                            </button>
                                                            {% endif %}
                                                            <div class="absolute w-3 h-3 top-3 -left-1 bg-gray-100 transform rotate-45 dark:bg-gray-800"></div>
                                                        </div>
                                                        <div class="text-xs flex items-center space-x-3 mt-2 ml-5">
                                                            <small>
                                                                <span id="like-blog-comment-count{{c.id}}">{{ c.likes.all.count }}</span>
                                                            </small>
                                                            <a id="like-blog-comment{{c.id}}" data-like-blog-comment="{{c.id}}" class="like-blog-comment text-red-500" {% if request.user in c.likes.all %} style="color: red;" {% else %} style="color: gray;" {% endif %}>
                                                                <i id="like-comment-icon{{c.id}}" class="fas fa-heart"></i>
                                                            </a> 

                                                            <!-- add new reply getElementById -->
                                                            
                                                            <details >
                                                                <summary>
                                                                <div class="">Reply</div>
                                                                </summary>
                                                                <details-menu role="menu" class="origin-topf-right relative right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none">
                                                                    <div class="pyf-1" role="none">
                                                                        <br>
                                                                    <div class="p-1 d-flex">
                                                                        
                                                                        <input type="text"  class="with-border blog-reply-input{{c.id}}"  id="blog-reply-input{{c.id}}">
                                                                        <button id="reply-blog-comment-btn" data-reply-blog-comment-btn="{{c.id}}" type="submit" class="reply-blog-comment-btn block w-fulfl text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900" role="menuitem">
                                                                        <ion-icon name="send"></ion-icon>
                                                                    </button>
                                                                </div>
                                                                </div>
                                                                </details-menu>
                                                            </details>


                                                            <span> {{c.date|time_ago}} </span>
                                                            <!-- comment replies -->
                                                        </div>
                                                            <div class="reply-div{{c.id}}">
                                                                {% for c in c.comment_replies|slice:":1" %}
                                                                    <div class="flex mr-6" style="margin-right: 10px;">
                                                                        <div class="w-5 h-5 rounded-full relative flex-shrink-0">
                                                                            <img src="{{request.user.profile.image.url}}" style="width: 20px; height: 20px;" alt="" class="absolute h-full rounded-full w-full">
                                                                        </div>
                                                                        <div>
                                                                            <div class="text-gray-700 py-1 px-1.5 rounded-md bg-gray-100 relative lg:ml-2.5 ml-1 lg:mr-6 dark:bg-gray-800 dark:text-gray-100">
                                                                                <p class="leading-6 text-sm">{{c.reply}}</p>
                                                                                <div class="absolute w-1.5 h-1.5 top-1.5 -left-0.5 bg-gray-100 transform rotate-45 dark:bg-gray-800"></div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                {% endfor %}
                                                                
                                                        </div>
                                                    </div>
                                                </div>
                                                {% else %}
                                                
                                                {% endif %}
                                                {% endfor %}
                                                

                                            </div>
                                            {% with b.blog_comment|length as total_comment %}
                                            {% if total_comment|add:'-2' > 0 %}
                                            <a href="{% url 'blog:blog-detail' b.slug %}" id="view-more-comments{{b.id}}" class="hover:text-blue-600 hover:underline">  View {{total_comment|add:'-2'}} more Comment{{total_comment|add:'-2'|pluralize}} </a>
                                            {% else %}
                                            <p class="text-blue-600">No more Comment</p>
                                            {% endif %}
                                            {% endwith %}

                                            <div class="bg-gray-100 rounded-full relative dark:bg-gray-800 border-t">
                                                <input placeholder="What's your say .." class="bg-transparent max-h-10 shadow-none px-5 blog-comment-input{{b.id}}" id="blog-comment-input{{b.id}}" data-blog-comment-input="{{b.id}}">
                                                <div class="-m-0.5 absolute bottom-0 flex items-center right-3 text-xl">
                                                    <!-- <a href="#">
                                                        <ion-icon name="happy-outline" class="hover:bg-gray-200 p-1.5 rounded-full"></ion-icon>
                                                    </a>
                                                    <a href="#">
                                                        <ion-icon name="image-outline" class="hover:bg-gray-200 p-1.5 rounded-full"></ion-icon>
                                                    </a> -->
                                                    <a style="cursor: pointer;" class="send-blog-comment{{b.id}}"  id="send-blog-comment" data-send-blog-comment="{{b.id}}">
                                                        <ion-icon name="send-outline" class="hover:bg-gray-200 p-1.5 rounded-full"></ion-icon>
                                                    </a>
                                                </div>
                                            </div>

                                        </div>

                                    </div>
                                {% endfor %}
                            </div>

                            
                        
        
                        </div>
                        <div class="w-full flex-shirink-0">

                            <div class="card p-4 mb-5">

                                <h1 class="block text-lg font-bold"> About  </h1>

                                <div class="space-y-4 mt-3">
                                    
                                    <div class="flex items-center space-x-3">
                                        <ion-icon name="people" class="bg-gray-100 p-2 rounded-full text-2xl" role="img" aria-label="people"></ion-icon>
                                        <div class="flex-1">
                                            <div class="font-semibold">  12 Members </div>
                                        </div>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <ion-icon name="globe-outline" class="bg-gray-100 p-2 rounded-full text-2xl" role="img" aria-label="people"></ion-icon>
                                        <div class="flex-1">
                                            <div class="font-bold"> Public </div>
                                            <div> Anyone can see who's in the group and what they post. </div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <ion-icon name="unlink" class="bg-gray-100 p-1.5 rounded-full text-xl"></ion-icon>
                                        <div class="flex-1">
                                            <div>  <a href="#" class="text-blue-500"> https://mydomain.com </a> </div> 
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <ion-icon name="mail-open" class="bg-gray-100 p-1.5 rounded-full text-xl"></ion-icon>
                                        <div class="flex-1">
                                            <div>  <a href="#" class="text-blue-500">myname@mywebssite.com</a> </div> 
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <ion-icon name="albums" class="bg-gray-100 p-1.5 rounded-full text-xl"></ion-icon>
                                        <div class="flex-1">
                                            <div>  <a href="#" class="text-blue-500">Product/service</a> </div> 
                                        </div>
                                    </div>
                                    
                                </div>
                                
                            </div>
                            
                            <div class="widget card p-5 border-t">
                                <div class="flex items-center justify-between mb-2">
                                    <div>
                                        <h4 class="text-lg font-semibold"> Related  groups </h4>
                                    </div>
                                    <a href="#" class="text-blue-600 "> See all</a>
                                </div>
                                <div>
                            
                                <div class="flex items-center space-x-4 rounded-md -mx-2 p-2 hover:bg-gray-50">
                                    <a  href="#" class="w-12 h-12 flex-shrink-0 overflow-hidden rounded-full relative">
                                        <img src="{% static 'assets/images/group/group-3.jpg' %}" class="absolute w-full h-full inset-0 " alt="">
                                    </a>
                                    <div class="flex-1">
                                        <a href="" class="text-base font-semibold capitalize"> Graphic Design  </a>
                                        <div class="text-sm text-gray-500 mt-0.5"> 345K  Following</div>
                                    </div>
                                    <a  class="flex items-center justify-center h-8 px-3 rounded-md text-sm border font-semibold bg-blue-500 text-white">
                                        Join
                                    </a>
                                </div>
                                <div class="flex items-center space-x-4 rounded-md -mx-2 p-2 hover:bg-gray-50">
                                    <a  class="w-12 h-12 flex-shrink-0 overflow-hidden rounded-full relative">
                                        <img src="{% static 'assets/images/group/group-4.jpg' %}" class="absolute w-full h-full inset-0 " alt="">
                                    </a>
                                    <div class="flex-1">
                                        <a  href="#"  class="text-base font-semibold capitalize"> Mountain Riders </a>
                                        <div class="text-sm text-gray-500 mt-0.5"> 452k Following </div>
                                    </div>
                                    <a  href="#"  class="flex items-center justify-center h-8 px-3 rounded-md text-sm border font-semibold bg-blue-500 text-white">
                                        Join
                                    </a>
                                </div>
                                <div class="flex items-center space-x-4 rounded-md -mx-2 p-2 hover:bg-gray-50">
                                    <a  href="#"  class="w-12 h-12 flex-shrink-0 overflow-hidden rounded-full relative">
                                        <img src="{% static 'assets/images/group/group-2.jpg' %}" class="absolute w-full h-full inset-0" alt="">
                                    </a>
                                    <div class="flex-1">
                                        <a  class="text-base font-semibold capitalize">  Coffee Addicts  </a>
                                        <div class="text-sm text-gray-500 mt-0.5"> 845K Following</div>
                                    </div>
                                    <a href="#"   class="flex items-center justify-center h-8 px-3 rounded-md text-sm border font-semibold bg-blue-500 text-white">
                                        Join
                                    </a>
                                </div>
                                <div class="flex items-center space-x-4 rounded-md -mx-2 p-2 hover:bg-gray-50">
                                    <a href="#" class="w-12 h-12 flex-shrink-0 overflow-hidden rounded-full relative">
                                        <img src="{% static 'assets/images/group/group-1.jpg' %}" class="absolute w-full h-full inset-0" alt="">
                                    </a>
                                    <div class="flex-1">
                                        <a class="text-base font-semibold capitalize"> Architecture    </a>
                                        <div class="text-sm text-gray-500 mt-0.5"> 237K Following</div>
                                    </div>
                                    <a  href="#" class="flex items-center justify-center h-8 px-3 rounded-md text-sm border font-semibold bg-blue-500 text-white">
                                        Join
                                    </a>
                                </div>
                        
                                </div>
                            </div>
                        

                        </div>
                    </div>
                    <div class="card md:p-6 p-2 max-w-3xl mx-auto">

                        <div class="flex justify-between items-start relative md:mb-4 mb-3">
                            <div class="flex-1">
                                <h2 class="text-xl font-bold">My Photos </h2>
                               
                            </div>
                            <a href="#offcanvas-create" uk-toggle class="flex items-center justify-center z-10 h-10 w-10 rounded-full bg-blue-600 text-white absolute right-0" data-tippy-placement="left" title="Create New Album">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
                            </a>
                        </div>

                        <div class="grid md:grid-cols-4 sm:grid-cols-3 grid-cols-2 gap-3 mt-5">
                            
                            {% for p in blogs %}
                                {% if p.file.url|is_image %}
                                    <div>
                                        <div class="bg-green-400 max-w-full lg:h-44 h-36 rounded-lg relative overflow-hidden shadow uk-transition-toggle">
                                            
                                                <img src="{{p.file.url}}" class="w-full h-full absolute object-cover inset-0">
                                                
                                            <!-- overly-->
                                            <div class="-bottom-12 absolute bg-gradient-to-b from-transparent h-1/2 to-gray-800 uk-transition-slide-bottom-small w-full"></div>
                                            <div class="absolute bottom-0 w-full p-3 text-white uk-transition-slide-bottom-small">
                                                <div class="text-base"> {{p.title}}</div>
                                                <div class="flex justify-between text-xs">
                                                    <a href="{% url 'blog:blog-detail' p.slug%}">  Like</a>
                                                    <a href="{% url 'blog:blog-detail' p.slug%}">  Comment </a>
                                                    <a href="{% url 'blog:blog-detail' p.slug%}">  Share </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                            
                        </div>

                            
                        

                    </div>
                    <div class="card md:p-6 p-2 max-w-3xl mx-auto">

                        <div class="flex justify-between items-start relative md:mb-4 mb-3">
                            <div class="flex-1">
                                <h2 class="text-xl font-bold">My Videos </h2>
                               
                            </div>
                            <a href="#offcanvas-create" uk-toggle class="flex items-center justify-center z-10 h-10 w-10 rounded-full bg-blue-600 text-white absolute right-0" data-tippy-placement="left" title="Create New Album">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd"></path></svg>
                            </a>
                        </div>

                        <div class="grid md:grid-cols-4 sm:grid-cols-3 grid-cols-2 gap-3 mt-5">
                            
                            {% for p in blogs %}
                                {% if p.file.url|is_video %}
                                    <div>
                                        <div class="bg-green-400 max-w-full lg:h-44 h-36 rounded-lg relative overflow-hidden shadow uk-transition-toggle">
                                            
                                                <video src="{{p.file.url}}" class="w-full h-full absolute object-cover inset-0"></video>

                                                
                                            <!-- overly-->
                                            <div class="-bottom-12 absolute bg-gradient-to-b from-transparent h-1/2 to-gray-800 uk-transition-slide-bottom-small w-full"></div>
                                            <div class="absolute bottom-0 w-full p-3 text-white uk-transition-slide-bottom-small">
                                                <div class="text-base"> {{p.title}}</div>
                                                <div class="flex justify-between text-xs">
                                                    <a href="{% url 'blog:blog-detail' p.slug%}">  Like</a>
                                                    <a href="{% url 'blog:blog-detail' p.slug%}">  Comment </a>
                                                    <a href="{% url 'blog:blog-detail' p.slug%}">  Share </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endfor %}
                            
                        </div>

                            
                        

                    </div>
                    
                </div>

            </div>
        </div>
        
    </div>



    <!-- open chat box -->
    <div uk-toggle="target: #offcanvas-chat" class="start-chat">
        <svg class="h-7 w-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path>
        </svg>
    </div>
    
    <div id="offcanvas-chat" uk-offcanvas="flip: true; overlay: true">
        <div class="uk-offcanvas-bar bg-white p-0 w-full lg:w-80 shadow-2xl">


            <div class="relative pt-5 px-4">

                <h3 class="text-2xl font-bold mb-2"> Chats </h3>

                <div class="absolute right-3 top-4 flex items-center space-x-2">

                    <button class="uk-offcanvas-close  px-2 -mt-1 relative rounded-full inset-0 lg:hidden blcok"
                        type="button" uk-close></button>

                    <a href="#" uk-toggle="target: #search;animation: uk-animation-slide-top-small">
                        <ion-icon name="search" class="text-xl hover:bg-gray-100 p-1 rounded-full"></ion-icon>
                    </a>
                    <a href="#">
                        <ion-icon name="settings-outline" class="text-xl hover:bg-gray-100 p-1 rounded-full"></ion-icon>
                    </a>
                    <a href="#">
                        <ion-icon name="ellipsis-vertical" class="text-xl hover:bg-gray-100 p-1 rounded-full"></ion-icon>
                    </a>
                    <div class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500 hidden border border-gray-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700"  
                    uk-drop="mode: click;pos: bottom-right;animation: uk-animation-slide-bottom-small; offset:5">
                        <ul class="space-y-1">
                          <li> 
                              <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-100 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">
                                 <ion-icon name="checkbox-outline" class="pr-2 text-xl"></ion-icon> Mark all as read
                              </a> 
                          </li>
                          <li> 
                              <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-100 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">
                                <ion-icon name="settings-outline" class="pr-2 text-xl"></ion-icon>  Chat setting 
                              </a> 
                          </li>
                          <li> 
                              <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-100 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">
                                <ion-icon name="notifications-off-outline" class="pr-2 text-lg"></ion-icon>   Disable notifications
                              </a> 
                          </li> 
                          <li> 
                              <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-100 hover:text-gray-800 rounded-md dark:hover:bg-gray-800">
                                <ion-icon name="star-outline"  class="pr-2 text-xl"></ion-icon>  Create a group chat 
                              </a> 
                          </li>
                        </ul>
                    </div>
                              

                </div>


            </div>

            <div class="absolute bg-white z-10 w-full -mt-5 lg:-mt-2 transform translate-y-1.5 py-2 border-b items-center flex"
                id="search" hidden>
                <input type="text" placeholder="Search.." class="flex-1">
                <ion-icon name="close-outline" class="text-2xl hover:bg-gray-100 p-1 rounded-full mr-4 cursor-pointer"
                    uk-toggle="target: #search;animation: uk-animation-slide-top-small"></ion-icon> 
            </div>

            <nav class="responsive-nav border-b extanded mb-2 -mt-2">
                <div class="" uk-sticky="offset:80">

                    <nav class="responsive-nav border-b extanded mb-2 -mt-2">
                        <ul uk-switcher="connect: #group-details; animation: uk-animation-fade">
                            <li class="uk-active"><a class="active" href="#0">  Friends  <span> {{request.user.profile.friends.all.count}} </span> </a></li>
                        </ul>
                        
                    </nav>

                    <div class="contact-list">

                        
                        {% for f in request.user.profile.friends.all %}
                            
                            
                        <a >
                            <div class="contact-avatar">
                                <img src="{{f.profile.image.url}}" alt="">
                                <span class="user_status status_online"></span>
                            </div>
                            <div class="contact-username"> {{f.profile.full_name}}</div>
                        </a>
                        <div uk-drop="pos: left-center ;animation: uk-animation-slide-left-small">
                            <div class="contact-list-box">
                                <div class="contact-avatar">
                                    <img src="{{f.profile.image.url}}" alt="">
                                    <span class="user_status status_online"></span>
                                </div>
                                <div class="contact-username">  {{f.profile.full_name}}</div>
                                <p>
                                    <ion-icon name="people" class="text-lg mr-1"></ion-icon> Become friends with
                                    <strong> Stella Johnson </strong> and <strong> 14 Others</strong>
                                </p>
                                <div class="contact-list-box-btns">
                                    <a href="{% url 'core:inbox_detail' f.username %}" class="button primary flex-1 block mr-2"> <i class="uil-envelope mr-1"></i> Send message</a>
                                    <button type="button"  class="button secondary button-icon mr-2"><i class="uil-list-ul"> </i> </button>
                                    <button type="button" a  class="button secondary button-icon"> <i class="uil-ellipsis-h"> </i> </button>
                                </div>
                            </div>
                        </div>
                        {% endfor %}



                    </div>


                </div>
            </nav>
        </div>
    </div>

    <!-- Craete post modal -->
    <div id="create-blog-modal" class="create-post is-story" uk-modal>
        <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical rounded-lg p-0 lg:w-5/12 relative shadow-2xl uk-animation-slide-bottom-small">
            <form method="post" id="blog-form" enctype="multipart/form-data">
                {% csrf_token %}

                <div class="text-center py-3 border-b">
                    <h3 class="text-lg font-semibold"> Create Blog </h3>
                    <button class="uk-modal-close-default bg-gray-100 rounded-full p-2.5 right-2" type="button" uk-close uk-tooltip="title: Close ; pos: bottom ;offset:7"></button>
                </div>
                <div class="flex flex-1 items-start space-x-4 p-5">
                    <img src="{{request.user.profile.image.url}}" class="bg-gray-200 border border-white rounded-full w-11 h-11">
                    <div class="flex-1 pt-2">
                        <textarea name="blog-title" id="blog-title" class="uk-textare text-black shadow-none focus:shadow-none text-xl font-medium resize-none" rows="5" placeholder="What's Your Mind ? {{request.user.username}}!"></textarea>
                    </div>
                    
                </div>
                <div class="flex flex-1 p-5 w-100">
                    <div class="flex-1 pt-2">
                        <!-- Thumbnail preview -->
                        <img id="preview_blog_thumbnail" src="https://joadre.com/wp-content/uploads/2019/02/no-image.jpg" style="width: 100%; height: 200px; object-fit: cover; border-radius: 10px; display: none;">
                        <!-- Video preview -->
                        <video id="preview_blog_video" style="width: 100%; height: 200px; object-fit: cover; border-radius: 10px; display: none;" controls></video>
                    </div>
                </div>
                
                <script>
                    var displayFile = function (event) {
                        var file = event.target.files[0];
                        var outputImg = document.getElementById('preview_blog_thumbnail');
                        var outputVideo = document.getElementById('preview_blog_video');
                
                        // Reset previews
                        outputImg.style.display = 'none';
                        outputVideo.style.display = 'none';
                
                        if (file) {
                            var fileType = file.type;
                
                            if (fileType.startsWith('image/')) {
                                outputImg.src = URL.createObjectURL(file);
                                outputImg.style.display = 'block';
                                outputImg.onload = function () {
                                    URL.revokeObjectURL(outputImg.src);
                                };
                            } else if (fileType.startsWith('video/')) {
                                outputVideo.src = URL.createObjectURL(file);
                                outputVideo.style.display = 'block';
                                outputVideo.onload = function () {
                                    URL.revokeObjectURL(outputVideo.src);
                                };
                            }
                        }
                    };
                </script>
                
                <div class="bsolute bottom-0 p-4 space-x-4 w-full">
                    <div class="flex bg-gray-50 border border-purple-100 rounded-2xl p-2 shadow-sm items-center">
                        <div class="lg:block hidden ml-1"> Add to your post </div>
                        <div class="flex flex-1 items-center lg:justify-end justify-center space-x-2">

                            <label for="blog-file">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" class="w-9 h-9 text-blue-600 bg-blue-100 p-1.5 rounded-full cursor-pointer">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M14 2H6a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zM14 2v6h6M10 14h4"></path>
                                  </svg>
                            </label>
                            <input type="file" id="blog-file" name="blog-file" accept="image/*,video/*" onchange="displayFile(event)" style="display: none;"></input>
                            
                        </div>
                    </div>
                </div>
                <div class="flex items-center w-full justify-between border-t p-3">

                    

                    <div class="flex space-x-2">
                        
                        <button type="submit" id="share-blog" class="bg-blue-600 flex h-9 items-center justify-center rounded-md text-white px-5 font-medium"> Share </button>
                    </div>

                    
                </div>
                
            </form>
        </div>
    </div>

    
    <!-- For Night mode -->
{% endblock content %}